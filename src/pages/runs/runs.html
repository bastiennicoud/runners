<ion-header>

  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>
      <ion-icon name="ios-clipboard-outline"></ion-icon>&nbsp;Board&nbsp;
    </ion-title>
    <ion-icon *ngIf="nbUrgentRuns() || filters.urgent.isEnabled"
            class="filter filter__urgent {{filters.urgent.isEnabled?'filter__urgent--enabled':''}}"
            (click)="this.onFilterClick('urgent')">
        {{nbUrgentRuns()}}
    </ion-icon>
    <ion-icon class="wifi-status" *ngIf="!this.InternetStatus.getConnectionStatus()" name="wifi" ></ion-icon>
  </ion-navbar>
  <div class="filters" padding>
    <div class="filter" style="display: inline-block;">
        <button ion-button class="filter__item {{filters.mine.isEnabled?'filter__item--enabled':''}}" (click)="onFilterClick('mine')">Mes runs</button>
    </div>

    <div class="filter" style="display: inline-block;">
        <button ion-button class="filter__item {{filters.hideCompleted.isEnabled?'filter__item--enabled':''}}" (click)="onFilterClick('hideCompleted')">Terminés</button>
    </div>

    <div class="filter" style="display: inline-block;">
        <button ion-button class="filter__item {{filters.hideNotReady.isEnabled?'filter__item--enabled':''}}" (click)="onFilterClick('hideNotReady')">Prêts</button>
    </div>
  </div>
</ion-header>


<ion-content>

  <ion-refresher (ionRefresh)="refreshRuns($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <ion-list>

    <ion-item-group *ngFor="let group of getRuns() | groupRuns">

      <ion-item-divider sticky>
        <ion-label>{{group.date | date:'EEEE d MMMM y'}}</ion-label>
      </ion-item-divider>

      <ion-item *ngFor="let run of group.runs" (click)="showRun(run)" [attr.status]="run.status">
        <ion-label class="run">
          <ion-grid>
            <ion-row>
              <ion-col><h2 class="run__title">{{run.title}}</h2></ion-col>
              <ion-col><p class="run__time">{{run.beginAt | date:'shortTime'}}</p></ion-col>
            </ion-row>
            <ion-row>
              <ion-col><p class="run__waypoint">{{run.waypoints.length > 0 ? run.waypoints[0].nickname : ''}}</p></ion-col>
              <ion-col><ion-icon name="person" class="run__mine" *ngIf="this.user.belongsToRun(run)"></ion-icon></ion-col>
            </ion-row>
          </ion-grid>
        </ion-label>
      </ion-item>

    </ion-item-group>

    <ion-item *ngIf="!getRuns().length">
      <ion-label>
        <p>Aucun run</p>
      </ion-label>
    </ion-item>

  </ion-list>

</ion-content>
